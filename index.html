<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ›¡ï¸ CodeGuard AI - Ù…Ù†ØµØ© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠØ©</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<meta name="theme-color" content="#2563eb">
<style>
:root{
  --bg:#020617;--card:rgba(15,23,42,.97);--blue:#38bdf8;--blue2:#2563eb;--green:#22c55e;--red:#ef4444;--yellow:#eab308;--purple:#8b5cf6;
  --light-bg:#f8fafc;--light-card:rgba(255,255,255,.98);--light-text:#1e293b;--glass:rgba(255,255,255,0.12);
  --shadow-sm:0 10px 25px rgba(0,0,0,0.2);--shadow-md:0 20px 50px rgba(0,0,0,0.3);--shadow-lg:0 30px 70px rgba(0,0,0,0.4);
}
*{box-sizing:border-box;font-family:'Cairo',sans-serif;margin:0;padding:0;}
body{background:linear-gradient(135deg,var(--bg),#111827);color:#e5e7eb;overflow-x:hidden;transition:all .4s;}
.hidden{display:none;transition:all .4s ease;}
body.light{background:var(--light-bg);color:var(--light-text);}
body.light .card{background:var(--light-card);color:var(--light-text);}
body.light nav{background:var(--light-card);color:var(--light-text);}

.loading{display:inline-block;width:22px;height:22px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;margin-right:12px;animation:spin 1s ease-in-out infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(60px);}to{opacity:1;transform:translateY(0);}}

#login{height:100vh;background:linear-gradient(135deg,#020617,rgba(56,189,248,0.2));display:flex;justify-content:center;align-items:center;position:relative;}
#login::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;backdrop-filter:blur(12px);background:rgba(0,0,0,0.5);z-index:1;}
.login-box{background:var(--card);backdrop-filter:blur(30px);padding:45px;width:90%;max-width:480px;border-radius:30px;box-shadow:var(--shadow-lg);border:1px solid var(--glass);z-index:2;animation:fadeInUp 1.2s;}
.login-box h2{text-align:center;font-weight:800;margin-bottom:40px;background:linear-gradient(135deg,var(--blue),var(--blue2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:2.8em;}
.login-box input{width:100%;padding:20px;margin:18px 0;border:none;border-radius:18px;font-size:17px;background:var(--glass);color:#e5e7eb;border:1px solid rgba(255,255,255,0.3);transition:all .3s;}
.login-box input::placeholder{color:#9ca3af;}
.login-box input:focus{outline:none;box-shadow:0 0 0 4px rgba(56,189,248,0.4);border-color:var(--blue);transform:scale(1.02);}
button{background:linear-gradient(135deg,var(--blue2),var(--blue));color:#fff;font-weight:700;cursor:pointer;transition:all .3s;border:none;border-radius:18px;padding:20px;font-size:18px;box-shadow:var(--shadow-md);}
button:hover{transform:translateY(-3px) scale(1.02);box-shadow:var(--shadow-lg);}
button:disabled{background:#64748b;transform:none;cursor:not-allowed;}

nav{position:sticky;top:0;z-index:100;background:var(--card);backdrop-filter:blur(30px);display:flex;justify-content:space-between;align-items:center;padding:18px 30px;border-bottom:1px solid rgba(255,255,255,0.2);box-shadow:var(--shadow-md);}
.logo{font-size:2.2em;font-weight:800;background:linear-gradient(135deg,var(--blue),#60a5fa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.nav-buttons{display:flex;gap:15px;flex-wrap:wrap;align-items:center;}
nav button{background:rgba(30,41,59,0.95);color:#e5e7eb;border:none;padding:16px 28px;border-radius:18px;font-weight:700;cursor:pointer;transition:all .3s;}
nav button:hover{background:linear-gradient(135deg,var(--blue2),var(--blue));transform:translateY(-2px);}
nav button.active{background:linear-gradient(135deg,var(--blue),var(--blue2));box-shadow:0 0 0 4px rgba(56,189,248,0.4);}
#modeToggle{padding:14px 20px;background:var(--blue2);border-radius:15px;font-size:22px;}
#modeToggle:hover{transform:scale(1.15) rotate(180deg);}

.container{max-width:1300px;margin:auto;padding:30px;}
.grid{display:grid;gap:30px;}
.grid-4{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));}
.card{background:var(--card);backdrop-filter:blur(25px);padding:35px;border-radius:25px;box-shadow:var(--shadow-md);border:1px solid var(--glass);transition:all .4s;}
.card:hover{transform:translateY(-12px) scale(1.02);box-shadow:var(--shadow-lg);}

.stat{font-size:3em;font-weight:800;margin-bottom:15px;}
.stat.Low{color:var(--green);text-shadow:0 0 25px rgba(34,197,94,0.7);}
.stat.Medium{color:var(--yellow);text-shadow:0 0 25px rgba(234,179,8,0.7);}
.stat.High{color:var(--red);text-shadow:0 0 25px rgba(239,68,68,0.7);}
.stat.default{background:linear-gradient(135deg,var(--blue),#60a5fa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.badge{display:inline-block;padding:12px 24px;border-radius:35px;background:linear-gradient(135deg,var(--blue2),var(--blue));font-weight:700;color:#fff;box-shadow:var(--shadow-sm);}

.file-upload-btn{background:linear-gradient(135deg,var(--green),#16a34a);color:#fff;padding:18px 35px;border:none;border-radius:18px;cursor:pointer;font-weight:700;margin-bottom:25px;transition:all .3s;box-shadow:var(--shadow-md);}
.file-upload-btn:hover{transform:scale(1.05);}
textarea{width:100%;height:220px;background:rgba(17,24,39,0.97);color:#e5e7eb;border:1px solid rgba(255,255,255,0.3);border-radius:20px;padding:25px;font-family:'Courier New',monospace;font-size:16px;}
textarea:focus{outline:none;box-shadow:0 0 0 4px rgba(56,189,248,0.4);border-color:var(--blue);}
#scanResult{margin-top:30px;padding:30px;border-radius:20px;background:rgba(0,0,0,0.6);border-left:6px solid var(--blue);}
.vuln-item{padding:25px;margin:15px 0;border-radius:18px;}
.severity-high{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;}
.severity-medium{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;}
.severity-low{background:linear-gradient(135deg,#10b981,#059669);color:#fff;}

.progress{background:rgba(30,41,59,0.97);border-radius:18px;height:24px;overflow:hidden;margin:30px 0;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--green),#86efac);border-radius:18px;transition:width 2s ease;}

.profile-img{border-radius:50%;width:120px;height:120px;margin:0 auto 30px;display:block;border:6px solid var(--glass);cursor:pointer;transition:all .4s;}
.profile-img:hover{transform:scale(1.1);}
.logout-btn{background:linear-gradient(135deg,var(--red),#dc2626);color:#fff;padding:18px 45px;border:none;border-radius:18px;font-weight:700;cursor:pointer;transition:all .3s;margin-top:35px;}
.logout-btn:hover{transform:translateY(-3px);}

.quiz-q{margin-bottom:30px;}
.quiz-q label{display:block;margin:15px 0;padding:22px;border-radius:18px;background:var(--glass);border:1px solid rgba(255,255,255,0.2);cursor:pointer;transition:all .3s;}
.quiz-q label:hover{background:rgba(56,189,248,0.25);transform:translateX(5px);}

.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);backdrop-filter:blur(20px);justify-content:center;align-items:center;z-index:1000;}
.modal video{width:95%;max-width:1100px;border-radius:25px;}

section{animation:fadeInUp 1.2s ease;}
@media(max-width:768px){
  .nav-buttons{flex-direction:column;gap:12px;}
  .container{padding:20px;}
  .grid-4{grid-template-columns:1fr;}
  nav{padding:15px 20px;flex-direction:column;gap:20px;}
}
@media(max-width:480px){
  .login-box{padding:35px;max-width:95%;}
}
</style>
</head>
<body>

<!-- LOGIN - Ø¨Ø¯ÙˆÙ† action Ùˆ Ø¨Ø¯ÙˆÙ† method -->
<section id="login">
<div class="login-box">
<h2>ğŸ›¡ï¸ CodeGuard AI</h2>
<form id="loginForm">
<input id="userName" name="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
<input id="userEmail" name="email" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
<button type="submit" id="loginBtn">
<span id="loginText">ğŸš€ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø³Ù…ÙŠØ©</span>
<span id="loginLoading" class="loading" style="display:none;"></span>
</button>
</form>
</div>
</section>

<!-- MAIN APP -->
<section id="app" class="hidden">
<nav>
<div class="logo">ğŸ›¡ï¸ CodeGuard AI</div>
<div class="nav-buttons">
<button onclick="showSection('dashboard',this)" class="active">ğŸ  Dashboard</button>
<button onclick="showSection('scanner',this)">ğŸ§° Scanner</button>
<button onclick="showSection('quiz',this)">ğŸ“ Exam</button>
<button onclick="showSection('courses',this)">ğŸ“ Courses</button>
<button onclick="showSection('profile',this)">ğŸ‘¤ Profile</button>
<button id="modeToggle" onclick="toggleMode()">ğŸŒ“</button>
<button onclick="window.open('https://wa.me/201098995624','_blank')" style="background:linear-gradient(135deg,var(--green),#16a34a);">ğŸ’¬</button>
</div>
</nav>

<div class="container">
<!-- DASHBOARD -->
<section id="dashboard">
<div class="grid grid-4">
<div class="card"><div class="stat default" id="secLevel">Medium</div>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ù…Ø§Ù†</div>
<div class="card"><div class="stat default" id="vulnCount">0</div>Ø§Ù„Ø«ØºØ±Ø§Øª</div>
<div class="card"><div class="stat default" id="xpCount">150</div>Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø©</div>
<div class="card"><div class="stat default" id="userLevel">Ù…ØªÙˆØ³Ø·</div>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</div>
</div>

<div class="grid grid-4">
<div class="card">
<h4>ğŸ¤– ØªÙˆØµÙŠØ§Øª AI Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©</h4>
<ul style="line-height:2;">
<li>âœ… ØªØ¬Ù†Ø¨ <code>eval()</code></li>
<li>âœ… Prepared Statements</li>
<li>âœ… HTTPS + HSTS</li>
<li>âœ… CSP Headers</li>
<li>âœ… Rate Limiting</li>
</ul>
</div>
<div class="card">
<h4>ğŸ“Š ØªÙ‚Ø¯Ù…Ùƒ</h4>
<p id="quizScore">Ù„Ù… ÙŠØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø±</p>
<div class="progress"><div id="quizBar" class="progress-fill" style="width:0%"></div></div>
<span class="badge" id="badge">Ù„Ø§ Ø´Ø§Ø±Ø§Øª</span>
</div>
<div class="card">
<h4>ğŸ¯ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h4>
<div style="height:20px;margin:10px 0;background:var(--glass);border-radius:10px;animation:loading 2s infinite;"></div>
<div style="height:20px;margin:10px 0;background:var(--glass);border-radius:10px;animation:loading 2s infinite 0.3s infinite;"></div>
<div style="height:20px;margin:10px 0;background:var(--glass);border-radius:10px;animation:loading 2s infinite 0.6s infinite;"></div>
</div>
<div class="card">
<h4>ğŸ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</h4>
<span class="badge" style="background:linear-gradient(135deg,var(--purple),#7c3aed);">ğŸŒ± Ø§Ù„Ù…Ø¨ØªØ¯Ø¦</span><br>
<span class="badge" id="achieve1" style="opacity:0.5;background:linear-gradient(135deg,var(--yellow),#eab308);">ğŸ”¥ Ø§Ù„Ù…Ø­ØªØ±Ù</span>
</div>
</div>
</section>

<!-- SCANNER -->
<section id="scanner" class="hidden">
<div class="card">
<h3>ğŸ§  ÙØ­Øµ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠ (Real-time)</h3>
<input type="file" id="fileInput" accept=".txt,.js,.html,.php,.py,.css" style="display:none;">
<label for="fileInput" class="file-upload-btn">ğŸ“ Ø±ÙØ¹ Ù…Ù„Ù ÙƒÙˆØ¯</label>
<textarea id="codeInput" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§... ÙŠØªÙ… Ø§Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©"></textarea>
<button onclick="deepScanCode()" style="width:auto;padding:20px 50px;margin-top:25px;background:linear-gradient(135deg,var(--blue2),var(--blue));">ğŸ” ÙØ­Øµ Ø¹Ù…ÙŠÙ‚</button>
<div id="scanResult"></div>
<div id="scanHistory"></div>
</div>
</section>

<!-- QUIZ -->
<section id="quiz" class="hidden">
<div class="card">
<h3>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ (15 Ø³Ø¤Ø§Ù„)</h3>
<form id="quizForm">
<div id="quizBox"></div>
<button type="submit" id="quizSubmitBtn" style="width:auto;padding:20px 50px;margin-top:35px;">
<span id="quizBtnText">ğŸ“Š Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span>
<span id="quizLoading" class="loading" style="display:none;"></span>
</button>
</form>
<div id="quizResult" style="margin-top:40px;display:none;"></div>
</div>
</section>

<!-- COURSES -->
<section id="courses" class="hidden">
<div class="grid grid-4">
<div class="card">
<h4>ğŸ“ Ø£Ø³Ø§Ø³ÙŠØ§Øª OWASP Top 10</h4>
<p>25 Ø¯Ø±Ø³ â€¢ 95% Ù…ÙƒØªÙ…Ù„</p>
<div class="progress"><div class="progress-fill" style="width:95%"></div></div>
<button onclick="playCourseVideo('course1.mp4')" style="width:100%;padding:18px 30px;margin-top:25px;">â–¶ï¸ Ù…ØªØ§Ø¨Ø¹Ø©</button>
</div>
<div class="card">
<h4>ğŸ” ØªØ´ÙÙŠØ± Ù…ØªÙ‚Ø¯Ù…</h4>
<p>18 Ø¯Ø±Ø³ â€¢ 60% Ù…ÙƒØªÙ…Ù„</p>
<div class="progress"><div class="progress-fill" style="width:60%"></div></div>
<button onclick="playCourseVideo('course2.mp4')" style="width:100%;padding:18px 30px;margin-top:25px;">â–¶ï¸ Ù…ØªØ§Ø¨Ø¹Ø©</button>
</div>
</div>
</section>

<!-- PROFILE -->
<section id="profile" class="hidden">
<div class="card">
<img src="https://via.placeholder.com/120/2563eb/ffffff?text=ğŸ‘¤" alt="Profile" class="profile-img" id="profilePic">
<label for="profileUpload" class="file-upload-btn" style="display:block;margin:30px auto;width:fit-content;">ğŸ“¸ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø©</label>
<input type="file" id="profileUpload" accept="image/*">
<h3 style="text-align:center;margin:35px 0 25px 0;">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h3>
<p id="pname" style="font-size:1.6em;text-align:center;font-weight:800;margin:25px 0;"></p>
<p id="pemail" style="font-size:1.4em;text-align:center;color:#9ca3af;margin:20px 0;"></p>
<p id="pLevel" style="font-size:1.5em;text-align:center;margin:30px 0;"></p>
<span class="badge" id="profileBadge" style="display:block;margin:25px auto;">Ø´Ø§Ø±Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·</span>
<button onclick="logout()" class="logout-btn">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>
</section>
</div>
</section>

<!-- Video Modal -->
<div class="modal" id="videoModal">
<button onclick="closeVideoModal(event)" style="position:absolute;top:30px;right:30px;font-size:40px;background:none;border:none;color:#fff;cursor:pointer;">Ã—</button>
<video id="modalVideo" controls></video>
</div>

<script>
let user = {}, lastScore = 0, scanHistoryArr = [], currentVulns = [], userXP = 1250;
const questions = [
  ["Ù…Ø§ Ù‡Ùˆ XSSØŸ", ["Ù‡Ø¬ÙˆÙ… Ø§Ù„Ø­Ù‚Ù†", "Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©", "Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ØªØ´ÙÙŠØ±", "Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ù€ Firewall"], 0],
  ["SQL Injection ÙŠØ­Ø¯Ø« Ø¨Ø³Ø¨Ø¨ØŸ", ["Ø¹Ø¯Ù… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª", "Ø¶Ø¹Ù Ø§Ù„ØªØ´ÙÙŠØ±", "Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©", "Ø®Ø·Ø£ ÙÙŠ SSL"], 0],
  ["Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† CSRFØŸ", ["CSRF Tokens", "HTTPS ÙÙ‚Ø·", "Input Validation", "2FA"], 0],
  ["eval() ÙÙŠ JavaScriptØŸ", ["Ø®Ø·ÙŠØ± Ø¬Ø¯Ø§Ù‹", "Ø¢Ù…Ù† ØªÙ…Ø§Ù…Ø§Ù‹", "Ù…Ø³ØªØ­Ø³Ù†", "Ø¨Ø¯ÙŠÙ„ Ù„Ù€ JSON"], 0],
  ["OWASP Top 10 ÙŠØ´Ù…Ù„ØŸ", ["Ø£Ù‡Ù… Ø§Ù„Ø«ØºØ±Ø§Øª", "Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ©", "Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©", "Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†"], 0],
  ["HTTPS ÙŠØ³ØªØ®Ø¯Ù…ØŸ", ["SSL/TLS", "RSA ÙÙ‚Ø·", "DES", "MD5"], 0],
  ["Rate Limiting ÙŠØ­Ù…ÙŠ Ù…Ù†ØŸ", ["DDoS", "XSS", "CSRF", "SQLi"], 0],
  ["Content Security PolicyØŸ", ["ÙŠØ­Ù…ÙŠ Ù…Ù† XSS", "ÙŠØ³Ø±Ù‘Ø¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹", "ÙŠØ­Ø³Ù† SEO", "ÙŠØ´ÙÙ‘Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"], 0],
  ["2FA Ø£ÙØ¶Ù„ Ù„Ø£Ù†Ù‡ØŸ", ["Ø·Ø¨Ù‚Ø© Ø­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©", "Ø£Ø³Ø±Ø¹", "Ù…Ø¬Ø§Ù†ÙŠ", "Ù„Ø§ ÙŠØ­ØªØ§Ø¬ Ø¥Ù†ØªØ±Ù†Øª"], 0],
  ["Input SanitizationØŸ", ["ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª", "ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª", "Ø¶ØºØ· Ø§Ù„Ù…Ù„ÙØ§Øª", "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©"], 0],
  ["JWT ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠØŸ", ["Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©", "Ø§Ù„ØªØ´ÙÙŠØ±", "Ø§Ù„Ø¶ØºØ·", "Ø§Ù„ØªØ®Ø²ÙŠÙ†"], 0],
  ["CORS ÙŠØªØ­ÙƒÙ… ÙÙŠØŸ", ["Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨ÙŠÙ†ÙŠØ©", "Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„", "Ø§Ù„Ø°Ø§ÙƒØ±Ø©", "Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬"], 0],
  ["HSTS Header ÙŠØ¬Ø¨Ø±ØŸ", ["HTTPS ÙÙ‚Ø·", "HTTP", "Mixed Content", "Caching"], 0],
  ["X-Frame-Options ÙŠØ­Ù…ÙŠ Ù…Ù†ØŸ", ["Clickjacking", "SQL Injection", "XSS", "CSRF"], 0],
  ["Prepared Statements ØªØ­Ù…ÙŠ Ù…Ù†ØŸ", ["SQL Injection", "XSS", "CSRF", "DDoS"], 0]
];

// âœ… LOGIN FUNCTION - Ù…Ø¶Ù…ÙˆÙ† 100%
function handleLogin(e) {
  e.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ù€ refresh
  e.stopPropagation(); // Ù…Ù†Ø¹ Ø£ÙŠ event Ø¢Ø®Ø±
  
  const name = document.getElementById('userName').value;
  const email = document.getElementById('userEmail').value;
  
  if (!name || !email) {
    alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ');
    return;
  }
  
  // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  user = { name, email };
  localStorage.setItem('userName', name);
  localStorage.setItem('userEmail', email);
  
  // Loading animation
  const btn = document.getElementById('loginBtn');
  const text = document.getElementById('loginText');
  const loading = document.getElementById('loginLoading');
  
  btn.disabled = true;
  text.style.display = 'none';
  loading.style.display = 'inline-block';
  
  // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ù†ØµØ© Ø¨Ø¹Ø¯ 1.2 Ø«Ø§Ù†ÙŠØ©
  setTimeout(() => {
    document.getElementById('login').classList.add('hidden');
    document.getElementById('app').classList.remove('hidden');
    updateProfile();
    
    // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
    btn.disabled = false;
    text.style.display = 'inline-block';
    loading.style.display = 'none';
  }, 1200);
}

// Ø±Ø¨Ø· Ø§Ù„Ù€ event listener Ù…Ø¨Ø§Ø´Ø±Ø©
document.addEventListener('DOMContentLoaded', function() {
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚
  const name = localStorage.getItem('userName');
  const email = localStorage.getItem('userEmail');
  const theme = localStorage.getItem('theme');
  
  if (theme === 'light') document.body.classList.add('light');
  
  if (name && email) {
    user = { name, email };
    document.getElementById('login').classList.add('hidden');
    document.getElementById('app').classList.remove('hidden');
    updateProfile();
  }
  
  // Ø±Ø¨Ø· Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„
  document.getElementById('loginForm').addEventListener('submit', handleLogin);
  generateQuiz();
});

function showSection(id, btn) {
  document.querySelectorAll('#app section').forEach(s => s.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  document.querySelectorAll('.nav-buttons button').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

function updateProfile() {
  document.getElementById('pname').textContent = `Ø§Ù„Ø§Ø³Ù…: ${user.name}`;
  document.getElementById('pemail').textContent = `Ø§Ù„Ø¨Ø±ÙŠØ¯: ${user.email}`;
  document.getElementById('pLevel').textContent = 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰: Ù…ØªÙˆØ³Ø·';
  document.getElementById('profileBadge').textContent = 'ğŸ”¥ Ù…Ø­ØªØ±Ù';
}

function deepScanCode() {
  const code = document.getElementById('codeInput').value;
  let vulns = 0;
  
  const patterns = [
    {name:'XSS', regex:/innerHTML|document\.write/i, severity:'high'},
    {name:'SQL Injection', regex:/SELECT.*FROM/i, severity:'high'},
    {name:'Eval', regex:/eval\s*\(/i, severity:'high'},
    {name:'Cookie', regex:/document\.cookie/i, severity:'medium'},
    {name:'LocalStorage', regex:/localStorage\.setItem/i, severity:'low'}
  ];
  
  let results = [];
  patterns.forEach(p => {
    if (p.regex.test(code)) {
      vulns++;
      results.push(`<div class="vuln-item severity-${p.severity}"><strong>ğŸš¨ ${p.name}</strong></div>`);
    }
  });
  
  if (!results.length) results = ['<div class="vuln-item severity-low"><strong>âœ… Ù…Ø«Ø§Ù„ÙŠ!</strong></div>'];
  
  document.getElementById('vulnCount').textContent = vulns;
  document.getElementById('secLevel').textContent = vulns > 2 ? 'High' : vulns > 0 ? 'Medium' : 'Low';
  document.getElementById('scanResult').innerHTML = results.join('');
}

function generateQuiz() {
  let html = '';
  questions.forEach((q, i) => {
    html += `<div class="quiz-q">
      <p style="font-weight:800;margin-bottom:25px;">${q[0]}</p>`;
    q[1].forEach((opt, j) => {
      html += `<label><input type="radio" name="q${i}" value="${j}"> ${opt}</label>`;
    });
    html += '</div>';
  });
  document.getElementById('quizBox').innerHTML = html;
}

document.getElementById('quizForm').addEventListener('submit', function(e) {
  e.preventDefault();
  let score = 0;
  questions.forEach((q, i) => {
    const sel = document.querySelector(`input[name="q${i}"]:checked`);
    if (sel && parseInt(sel.value) === q[2]) score++;
  });
  
  lastScore = Math.round((score / questions.length) * 100);
  
  const btn = document.getElementById('quizSubmitBtn');
  const text = document.getElementById('quizBtnText');
  const loading = document.getElementById('quizLoading');
  
  btn.disabled = true;
  text.style.display = 'none';
  loading.style.display = 'inline-block';
  
  setTimeout(() => {
    alert(`ğŸ‰ Ù†ØªÙŠØ¬ØªÙƒ: ${lastScore}%!`);
    document.getElementById('quizScore').textContent = `Ù†ØªÙŠØ¬ØªÙƒ: ${lastScore}%`;
    document.getElementById('quizBar').style.width = lastScore + '%';
    document.getElementById('badge').textContent = lastScore >= 80 ? 'ğŸ† Ø®Ø¨ÙŠØ±' : 'ğŸ”¥ Ù…Ø­ØªØ±Ù';
    
    btn.disabled = false;
    text.style.display = 'inline-block';
    loading.style.display = 'none';
  }, 1500);
});

function logout() {
  if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ')) {
    localStorage.clear();
    location.reload();
  }
}

function toggleMode() {
  document.body.classList.toggle('light');
  localStorage.setItem('theme', document.body.classList.contains('light') ? 'light' : 'dark');
}

document.getElementById('fileInput').addEventListener('change', e => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = evt => document.getElementById('codeInput').value = evt.target.result;
    reader.readAsText(file);
  }
});

document.getElementById('profileUpload').addEventListener('change', e => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = evt => document.getElementById('profilePic').src = evt.target.result;
    reader.readAsDataURL(file);
  }
});

function playCourseVideo(src) {
  document.getElementById('modalVideo').src = src;
  document.getElementById('videoModal').style.display = 'flex';
}

function closeVideoModal(e) {
  e.stopPropagation();
  document.getElementById('videoModal').style.display = 'none';
  document.getElementById('modalVideo').pause();
}

document.getElementById('videoModal').addEventListener('click', e => {
  if (e.target === e.currentTarget) closeVideoModal(e);
});
</script>
</body>
</html>
